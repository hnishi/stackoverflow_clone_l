# 仕様

## 概要

StackoverflowCloneLは[stackoverflow](https://stackoverflow.com/)のクローンサイトである。
StackoverflowCloneLでは、ユーザ同士が技術トピックに対して、質問、回答を投稿することができるQ&Aサイトである。
下記では、StackoverflowCloneLにおける要件を記載する。

## 用語の定義

StackoverflowCloneLで用いる用語について定義する。

* User
  * StackoverflowCloneLを利用する利用者。
  * メールアドレスとパスワードにより認証を行なう。
* Question
  * Userが投稿した質問を指す。
* Answer
  * Questionに対してUserが投稿した回答を指す。
* Comment
  * QuestionまたはAnswerに対してUserが投稿したコメントを指す。
* Votes
  * QuestionまたはAnswer毎に設定される、その投稿への評価を表す整数値。
  * 各Userが1回だけ、+1または-1することができる。

## 対応ブラウザ

最新版のChromeのみでモバイルやSEOへの対応も不要。

## 必須要件

下記に記載される要件を満たすページを表示できる。
なおUserがログイン済みでない場合、下記で記述する情報を閲覧するための操作は可能だがデータを作成、更新するための操作は実施できない。

### 全画面共通

* Topページへのリンクが表示される。(Topページは後述する質問一覧ページ)
* Userがログイン済みでない場合下記が表示される。
  * 後述するUserログイン画面のリンク
* Userがログイン済みの場合下記が表示される。
  * 後述するユーザ詳細画面へのリンク
  * ログアウトボタン
    * このボタンをクリックするとUserはログアウトされる。

※上記はヘッダーまたはフッターに表示される内容を意味している。

### 質問一覧ページ

下記の要件を満たすQuestionの一覧を表示するためのページ。このページをStackoverflowCloneLのトップページとする。

* 全Userが投稿したQuestionが表示される。
* 表示される各質問に対して、下記の情報が表示される。
  * タイトル
    * タイトルをクリックすることにより後述する質問詳細ページを閲覧できる。
  * 投稿者のID
  * 投稿時間
* Questionを投稿するためのリンク(ボタン)が存在する。
  * クリックすると後述する質問投稿ページが表示される。

※このページに相当するstackoverflow(本家)のページは[ここ](https://stackoverflow.com/)

### 質問詳細ページ

指定したQuestionに対して下記の要件を満たすQuestionの詳細を表示するためのページ。

* 指定したQuestionに対して下記の情報が表示される。
  * タイトル
  * 本文
  * 投稿者のID
  * 投稿時間
  * このQuestionに対して投稿されたCommentの一覧。
    * Commentとして下記の情報を表示する。
      * 本文
      * 投稿者のID
      * 投稿時間
    * commentは投稿時間の古いものから上から順に表示される
  * このQuestionに対して投稿されたAnswerの一覧
    * Answerとして下記の情報を表示する。
      * 本文
      * 投稿者のID
      * 投稿時間
      * このAnswerに対して投稿されたCommentの一覧。
        * Commentとして下記の情報を表示する。
          * 本文
          * 投稿者のID
          * 投稿時間
      * commentは投稿時間の古いものから上から順に表示される。
    * Answerは投稿時間の古いものから上から順に表示される。
* Questionに対してAnswerを投稿できるフォームが存在し、投稿ボタンを押すことで、Answerが新規作成される。
  * answerの本文は1文字以上3000文字以内。
* QuestionまたはAnswerに対してCommentが投稿できるフォームが存在し、投稿ボタンを押すことでCommentが新規作成される。
  * commentの本文は1文字以上1000文字以内。
* 自分自身が投稿した、Question, Answer, Commentの本文(Questionの場合はタイトル)は編集が可能。
* 上記で記載した「投稿者のID」の部分はリンク表示となっており、後述するユーザ詳細ページに遷移できる。

つまり、このページに対する、Question, Answer, Commentの表示としては下記のような階層的な構造となる。
```
|-- Question
    |-- Comment
    |-- Comment
    |-- Answer
    |   |-- Comment
    |   |-- Comment
    |-- Answer
    |-- Answer
        |-- Comment
        |-- Comment
```

※このページに相当するstackoverflow(本家)のページは[ここ](https://stackoverflow.com/questions/11828270/how-to-exit-the-vim-editor)

### 質問投稿ページ

下記の要件を満たすQuestionを投稿するためのページ。

* 下記の情報を入力してQuestionが投稿できる。
  * タイトル
    * 文字数は1文字以上100文字以内。
  * 本文
    * 文字数は1文字以上3000文字以内。
* 投稿する前に、本当に投稿するかを確認するダイアログが表示される。
* 投票者としてなりすましが可能であってはならない。

※このページに相当するstackoverflow(本家)のページは[ここ](https://stackoverflow.com/questions/ask)

### ユーザ詳細ページ

下記の要件を満たすUserの詳細を表示するためのページ。

* 下記のユーザの情報が表示される
  * ユーザのID
  * ユーザが投稿したQuestionの一覧
    * 各Questionの情報として下記が表示される
      * タイトル
        * タイトルをクリックすることにより後述する質問詳細ページを閲覧できる。
      * 投稿時間
  * ユーザが投稿したAnswerの一覧
    * 各Answerの情報として下記が表示される
      * Answerを投稿したQuestionのタイトル
        * タイトルをクリックすることにより後述する質問詳細ページを閲覧できる。
      * 投稿時間

※このページに相当するstackoverflow(本家)のページは[ここ](https://stackoverflow.com/users/1144035/gordon-linoff?tab=profile)

### Userログインページ

下記の要件を満たすログインをするためのページ。

* ログインするためのメールアドレスとパスワードを入力するフォームがあり、正しい値を入力することでUserとしてログインできる。
* パスワード入力フォームでは入力された文字がマスクされて表示される(例: ●●●●等)

※このページに相当するstackoverflow(本家)のページは[ここ](https://stackoverflow.com/users/login?)

## オプショナル要件

下記ではオプショナルの要件を記述する。

### 投票機能の実装

下記の要件を満たす投票機能を実装する。
* 質問詳細ページにおいて下記が可能。
  * Questionに対して「良い」、「悪い」の投票機能。
    * Question毎に「良い」、「悪い」のいずれかの投票のみが可能。
      * すでに「良い」/「悪い」を投票しているUserが再度「良い」/「悪い」の投票をすることはできない。
      * すでに「良い」/「悪い」を投票しているUserでもそれと反対の「悪い」/「良い」の投票をすることはでき、その場合、投票済みの「良い」/「悪い」を取り消して、新たに指定した「悪い」/「良い」をそのUserの投票として反映させる。
        * 例えば、「良い」を投票済みのUserでも「悪い」を投票することは可能で、その場合Userの「良い」の投票は取り消され、「悪い」が新たにそのユーザの投票となる。
    * 画面上では、「良い」/「悪い」に対する1票の投票をそれぞれ+1/-1として扱い、その数値を合算したものを表示する。
      * 例えば、「良い」が3票、「悪い」が2票の場合、画面上にはそのQuestionに対する投票結果として「1」という数値を表示する。
      * 投票数が0の場合は、「0」を表示する。
  * 自分自身が作成したQuestionに対しては投票することができない。
  * ログイン済みでないと投票できない。

### ページネーション機能の実装

現行仕様では、1つのページに全Questionが表示されてしまうため、Questionの数が増えてきた場合非常にみずらくなる。
そこで、質問一覧ページにページネーション機能を実装し、質問一覧画面に表示するのは10件のQuestionのみとし、ページを切り替えることで他のQuestionを閲覧できるように修正する。
具体的なページネーションの表示方法については各自で調査した上で実装する。
